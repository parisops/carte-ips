<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Carte Interactive - IPS des Écoles</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
<link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="app-container">
  <aside class="sidebar">
    <div class="sidebar-content">
      <h1 class="title">Carte Interactive</h1>
      <p class="subtitle">Indice de Position Sociale des Établissements</p>

      <div id="filters" class="filters">
        <h2 class="section-title">Filtres</h2>

        <div class="form-group">
          <label class="form-label">Type d'établissement</label>
          <div class="checkbox-group">
            <label class="checkbox-label"><input id="ecolesCheck" type="checkbox" checked /> Écoles</label>
            <label class="checkbox-label"><input id="collegesCheck" type="checkbox" checked /> Collèges</label>
            <label class="checkbox-label" for="lyceesCheck"><input id="lyceesCheck" type="checkbox" checked />Lycées</label>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="regionFilter">Région</label>
          <select id="regionFilter" class="form-control">
            <option value="">Toutes les régions</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label" for="departmentFilter">Département</label>
          <select id="departmentFilter" class="form-control">
            <option value="">Tous les départements</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Secteur</label>
          <div class="checkbox-group">
            <label class="checkbox-label"><input id="publicCheck" type="checkbox" checked /> Public</label>
            <label class="checkbox-label"><input id="privateCheck" type="checkbox" checked /> Privé sous contrat</label>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Plage IPS : <span id="ipsRangeLabel">45 - 185</span></label>
          <div class="range-inputs">
            <input id="ipsMin" type="number" class="form-control form-control-small" value="45" min="45" max="185" />
            <span>-</span>
            <input id="ipsMax" type="number" class="form-control form-control-small" value="185" min="45" max="185" />
          </div>
        </div>

        <button id="resetFilters" class="btn btn--primary btn--full-width">Réinitialiser les filtres</button>
      </div>

      <div id="statistics" class="statistics">
        <h2 class="section-title">Statistiques</h2>
        <div class="stat-item">Établissements affichés : <span id="statTotal">0</span></div>
        <div class="stat-item">IPS moyen : <span id="statAvg">-</span></div>
        <div class="stat-item">IPS min : <span id="statMin">-</span></div>
        <div class="stat-item">IPS max : <span id="statMax">-</span></div>
        <div class="stat-item">Public : <span id="statPublic">0</span></div>
        <div class="stat-item">Privé : <span id="statPrivate">0</span></div>
      </div>

      <div id="legend" class="legend">
        <h2 class="section-title">Légende</h2>
        <div class="legend-subsection">
          <h3 class="legend-subtitle">Indice IPS</h3>
          <div class="legend-item"><span class="legend-color" style="background-color:#d32f2f;"></span>&lt; 90 - Très défavorisé</div>
          <div class="legend-item"><span class="legend-color" style="background-color:#f57c00;"></span>90-105 - Défavorisé</div>
          <div class="legend-item"><span class="legend-color" style="background-color:#fbc02d;"></span>105-120 - Moyen</div>
          <div class="legend-item"><span class="legend-color" style="background-color:#7cb342;"></span>120-130 - Favorisé</div>
          <div class="legend-item"><span class="legend-color" style="background-color:#388e3c;"></span>&gt; 130 - Très favorisé</div>
        </div>
        <div class="legend-subsection">
          <h3 class="legend-subtitle">Type d'établissement</h3>
          <div class="legend-item"><span class="legend-shape legend-circle"></span>Écoles</div>
          <div class="legend-item"><span class="legend-shape legend-square"></span>Collèges</div>
          <div class="legend-item"><span class="legend-shape legend-diamond"></span>Lycées</div>
        </div>
      </div>
    </div>
  </aside>
  
  <main class="map-container">
    <div id="map" class="map"></div>
  </main>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
<script src="main.js"></script>
</body>
</html>
